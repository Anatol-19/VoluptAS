# PLAN MODE

> Правила планирования для задач в проекте VoluptAS

---

## Правила

- ✅ План должен быть **предельно кратким** (телеграфный стиль, списки)
- ✅ Оптимальный размер: **3–7 шагов**. Если больше — разбей на подзадачи
- ✅ Каждый шаг должен быть **проверяемым**
- ✅ В конце плана обязательно перечисли **неразрешённые вопросы** (1–3 шт.)
- ❌ **Не пиши код**, пока пользователь не подтвердит план

---

## Формат

```markdown
Goal:

Scope:

Steps:
1.
2.
3.

Definition of Done:

Risks:

Questions:
```

---

## Примеры

### ✅ Фича (3–7 шагов)

```markdown
Goal: Реализовать экспорт графа связей в PNG формат

Scope:
- src/ui/widgets/full_graph_tab.py
- src/ui/main_window.py

Steps:
1. Добавить кнопку «Экспорт PNG» в toolbar графа
2. Реализовать функцию экспорта через Matplotlib
3. Добавить диалог выбора пути сохранения
4. Обновить меню «Файл → Экспорт»
5. Запустить verification loop

Definition of Done:
- Код компилируется
- Тесты проходят
- Verification выполнен

Risks:
- Matplotlib может не сохранить в PNG без бэкенда
- Большие графы (>500 нод) могут вызвать memory issues

Questions:
- Какой формат PNG предпочтителен?
- Нужно ли добавлять предпросмотр перед экспортом?
```

### ✅ Quick-fix (1–2 шага)

```markdown
Goal: Исправить абсолютный путь на относительный

Scope:
- src/config.py

Steps:
1. Заменить `Path.home() / 'credentials'` на `project_root / 'credentials'`
2. Запустить `python main.py`

Definition of Done:
- Приложение запускается с любой директории
- Credentials загружаются корректно

Risks:
- Нет

Questions:
```

---

## Чек-лист проверки плана

- [ ] План содержит 3–7 шагов (или 1–2 для quick-fix)
- [ ] Scope ограничен только необходимыми файлами
- [ ] Definition of Done конкретный и проверяемый
- [ ] Риски идентифицированы
- [ ] Questions перечислены (даже если пустые)
- [ ] Нет скрытых изменений (зависимости, рефакторинг «по пути»)

---

## Запрещено

- ❌ Начинать код без подтверждения плана
- ❌ Менять файлы вне Scope
- ❌ Добавлять зависимости без отдельного плана
- ❌ Рефакторить «заодно»
- ❌ Выполнять `git push` без разрешения
