# Анализ UX/UI текущего состояния VoluptAS

**Дата анализа:** 2025-10-15  
**Версия:** v0.4.0

---

## 1. МЕНЮ - Основная панель

### 1.1 Текущая структура меню (Menubar)

```
📁 Файл
  └─ Выход

✏️ Правка
  └─ ➕ Добавить

🔧 Инструменты
  ├─ 📦 Редактор сущностей
  ├─ 👥 Управление пользователями
  ├─ ──────────────────────
  ├─ 📚 Справочники
  ├─ ──────────────────────
  ├─ 🧑‍💻 BDD Feature Manager
  └─ 📝 Генерация BDD (batch)

🕸️ Граф
  └─ 🌐 Открыть граф

⚙️ Настройки
  └─ ⚙️ Zoho API
```

### 1.2 Toolbar (быстрые действия)

```
🔄 Обновить | ➕ Добавить | ✏️ Редактировать | 🗑️ Удалить | 📋 Все | 🔴 Критичное | 🎯 Фокусное
```

### 1.3 Проблемы текущего меню

#### ❌ Структура
- **Нелогичная группировка:** "Редактор сущностей" в Инструментах, хотя это основное действие
- **Дублирование:** "Добавить" есть и в меню Правка, и в Toolbar
- **Отсутствует импорт/экспорт** в главном меню
- **Отсутствует Dashboard/Метрики**
- **Zoho API** отдельно, а не в общих настройках интеграций

#### ❌ Навигация
- **Нет быстрого доступа к таблице** (она всегда открыта, но нет кнопки)
- **Граф в отдельном меню** (логичнее в "Вид" или "Визуализация")
- **BDD разбросан:** Manager в Инструментах, batch генерация там же

#### ❌ Отсутствуют разделы
- Вид (Dashboard, Table, Graph)
- Данные (CRUD, Import, Export)
- Тестирование (BDD, Coverage, Metrics)
- Помощь (Docs, About)

---

## 2. ЭКРАНЫ

### 2.1 Главный экран (MainWindow)

**Текущее состояние:**
```
┌─────────────────────────────────────────────────────────┐
│ Menubar + Toolbar                                       │
├─────────────────────────────────────────────────────────┤
│ Фильтры (2 строки):                                     │
│ [Поиск] [Type] [Module] [Epic]                          │
│ [Segment] [QA] [Dev] [Очистить] [Сбросить]              │
├──────────────────────────────┬──────────────────────────┤
│ Таблица (широкая)            │ Мини-граф (справа)       │
│ - Alias Tag                  │ - Показывает связи      │
│ - Title                      │   выбранного элемента   │
│ - Type                       │                          │
│ - Module, Epic, Segment      │                          │
│ - QA, Dev                    │                          │
│ - is_crit, is_focus          │                          │
├──────────────────────────────┴──────────────────────────┤
│ Statusbar                                               │
└─────────────────────────────────────────────────────────┘
```

#### ✅ Что работает:
- Таблица с inline редактированием (alias_tag, title, segment, чекбоксы)
- Мини-граф справа (Obsidian-стиль)
- Фильтры по всем основным полям

#### ❌ Проблемы:
1. **Двойной клик по строке НЕ открывает редактор** - нужно жать кнопку или Ctrl+E
2. **Вёрстка фильтров:**
   - Неравномерные отступы между элементами
   - "Дыры" между комбобоксами
   - Кнопки "Очистить/Сбросить" не выровнены
   - Нет визуальной группировки (без рамок/панелей)
3. **Клик по узлу в мини-графе ничего не делает**
   - Должен: одинарный клик → переход к строке в таблице
   - Должен: двойной клик → открыть полный граф от этого элемента

---

### 2.2 Редактор элемента (DynamicEditDialog)

**Структура:**
```
Вкладки:
  📋 Основные (functional_id, alias_tag, title, type, segment, module, epic, etc.)
  👥 Ответственные (QA, Dev, Accountable)
  ✅ Покрытие (Test Cases, Automation, Docs)
  🧑‍💻 BDD (генерация и редактирование feature-файлов)
```

#### ✅ Что работает:
- Динамические поля в зависимости от типа
- Валидация segment по типу (только для Feature, Story, Service, Element, Page)
- BDD вкладка с генерацией и экспортом

#### ❌ Проблемы:
- **Нет подсказок по возможным segment для типов**
  - Должно быть: для Feature/Story → рекомендация UI, API, Backend
  - Должно быть: для Service → API, Backend, Database, Integration
  - Должно быть: для Page/Element → UI
- **Нет шаблонов functional_id для типов**
  - Module: `MOD.название`
  - Epic: `MOD.EP.название`
  - Feature: `MOD.EP.название`
  - Story: `MOD.EP.FT.название`
  - Etc.
- **Нет автодополнения alias_tag** (можно предложить на основе title/functional_id)

---

### 2.3 Граф связей (GraphViewWindow)

**Текущее состояние:**
- Полный граф в отдельном окне
- Фильтры по типам связей (hierarchy, functional, service_dependency, etc.)
- Obsidian-стиль (тёмный фон, пастельные цвета)
- Экспорт в PNG

#### ❌ Проблемы:
- **Нет интерактивности:**
  - Клик по узлу → ничего
  - Hover на узле → нет tooltip
  - Двойной клик → не открывает редактор
- **Нет боковой панели** с инфо о выбранном элементе
- **Нет режимов отображения:** Hierarchy, Dependency, Combined, POM

---

### 2.4 BDD Feature Manager

**Текущее состояние:**
- Таблица всех элементов с фильтрами (ID, Title, Type, Segment, Crit, Focus)
- Предпросмотр Gherkin справа
- Кнопки генерации для выбранных/всех
- Экспорт одиночный и пакетный

#### ✅ Работает хорошо:
- Удобный интерфейс
- Фильтры логичные
- Предпросмотр полезен

#### ⚠️ Мелкие улучшения:
- Добавить подсветку Gherkin синтаксиса в предпросмотре
- Счётчик сгенерированных файлов

---

## 3. ОСТАЛЬНОЕ

### 3.1 Управление пользователями (UserManagerWindow)
- ✅ Работает хорошо
- ✅ Фильтры по ролям
- ✅ Импорт из Zoho

### 3.2 Справочники (DictionaryManagerWindow)
- ✅ Редактирование всех справочников
- ✅ Добавление/удаление значений
- ✅ Порядок и активность

### 3.3 Настройки (SettingsDialog)
- ✅ Google Sheets
- ✅ Zoho Projects (OAuth Wizard)
- ✅ Qase.io
- ⚠️ Нужно: добавить в главное меню как "Интеграции"

### 3.4 Фильтры таблицы

**Проблемы вёрстки:**
```python
# Текущий код (2 строки фильтров):
search_layout1.addWidget(QLabel('🔍 Поиск:'))       # Нет отступов
search_layout1.addWidget(self.search_input)         # Растягивается
search_layout1.addWidget(QLabel('Type:'))           # Прилипает
search_layout1.addWidget(self.type_filter)          # Узкий
# ... и так далее
```

**Нужно:**
- Фиксированная ширина для комбобоксов
- Равномерные отступы между элементами
- Группировка в панели с рамкой
- Выравнивание по вертикали

---

## 4. ПРИОРИТЕТЫ ИСПРАВЛЕНИЙ

### 🔴 Критичные (блокируют UX):
1. **Двойной клик по строке** → открытие редактора
2. **Клик по узлу в мини-графе** → переход к строке в таблице
3. **Вёрстка фильтров** → равномерные отступы, фиксированная ширина

### 🟡 Важные (улучшают UX):
4. **Подсказки segment** по типу элемента
5. **Шаблоны functional_id** для новых элементов
6. **Интерактивность графа** (клик, hover, tooltip)
7. **Редизайн меню** (логичная структура)

### 🟢 Желательные (polish):
8. **Dashboard** (главный экран с метриками)
9. **Режимы графа** (Hierarchy, Dependency, Combined, POM)
10. **Breadcrumbs** навигация
11. **Горячие клавиши** (Ctrl+N, Ctrl+E, Ctrl+G, etc.)

---

## 5. ПРЕДЛОЖЕНИЕ НОВОЙ СТРУКТУРЫ МЕНЮ

### 📁 Файл
```
📁 Файл
  ├─ 🆕 Новый элемент                [Ctrl+N]
  ├─ 💾 Сохранить изменения          [Ctrl+S]
  ├─ ───────────────────────
  ├─ 📥 Импорт
  │   ├─ CSV/Excel
  │   ├─ Google Sheets
  │   └─ JSON
  ├─ 📤 Экспорт
  │   ├─ CSV
  │   ├─ Excel (XLSX)
  │   ├─ Markdown
  │   ├─ JSON
  │   └─ Google Sheets
  ├─ ───────────────────────
  ├─ ⚙️ Настройки               [Ctrl+,]
  └─ 🚪 Выход                   [Ctrl+Q]
```

### 📊 Данные
```
📊 Данные
  ├─ 📋 Таблица элементов           [Ctrl+T]
  ├─ 👥 Управление пользователями   [Ctrl+U]
  ├─ 📚 Справочники                 [Ctrl+D]
  ├─ ───────────────────────
  ├─ 🔄 Обновить данные             [F5]
  └─ 🗑️ Очистить фильтры           [Ctrl+Shift+F]
```

### 🔗 Визуализация
```
🔗 Визуализация
  ├─ 🔗 Граф связей (полный)        [Ctrl+G]
  ├─ 📊 Мини-граф (переключить)     [Ctrl+M]
  ├─ ───────────────────────
  ├─ 🔍 Фильтры графа
  │   ├─ Иерархические связи
  │   ├─ Функциональные связи
  │   ├─ Сервисные зависимости
  │   └─ Page/Element (POM)
  ├─ 🎨 Режимы отображения
  │   ├─ Hierarchy Mode
  │   ├─ Dependency Mode
  │   ├─ Combined Mode
  │   └─ POM Mode
  └─ 💾 Экспорт графа (PNG)         [Ctrl+Shift+E]
```

### 🧪 Тестирование
```
🧪 Тестирование
  ├─ 🧙 BDD Feature Manager         [Ctrl+B]
  ├─ 📝 Генерация Feature-файлов
  ├─ 📤 Экспорт Feature-файлов
  ├─ ───────────────────────
  ├─ 📊 Матрица покрытия
  ├─ 📈 Метрики тестирования
  └─ 🔗 Интеграции
      ├─ Qase.io
      └─ Zoho Projects
```

### 🔧 Инструменты
```
🔧 Инструменты
  ├─ 🔄 Синхронизация
  │   ├─ Google Sheets
  │   ├─ Zoho Projects
  │   └─ Qase.io
  ├─ 🏗️ Построить иерархию          [Ctrl+H]
  ├─ ───────────────────────
  └─ 🧹 Утилиты
      ├─ Проверка целостности БД
      └─ Резервное копирование
```

### 📖 Помощь
```
📖 Помощь
  ├─ 📚 Документация                [F1]
  ├─ 🎓 Быстрый старт
  ├─ ───────────────────────
  ├─ ℹ️ О программе
  └─ 🔄 Проверить обновления
```

---

## 6. ИТОГОВЫЙ CHECKLIST ЗАДАЧ

### Высокий приоритет (сделать сейчас):
- [ ] Двойной клик по строке → открытие редактора
- [ ] Клик по узлу в мини-графе → переход к строке
- [ ] Двойной клик по узлу в мини-графе → полный граф от элемента
- [ ] Исправить вёрстку фильтров (отступы, ширина, выравнивание)
- [ ] Добавить подсказки segment по типам
- [ ] Добавить шаблоны functional_id для типов

### Средний приоритет (после MVP):
- [ ] Редизайн меню (новая структура)
- [ ] Горячие клавиши (Ctrl+N, Ctrl+E, Ctrl+G, etc.)
- [ ] Интерактивность графа (hover, tooltip, боковая панель)
- [ ] Dashboard (метрики, графики, быстрый доступ)

### Низкий приоритет (польша):
- [ ] Режимы графа (Hierarchy, Dependency, Combined, POM)
- [ ] Breadcrumbs навигация
- [ ] Автодополнение alias_tag

---

**Следующий шаг:** Реализация задач высокого приоритета
