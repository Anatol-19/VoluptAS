# 🏗️ НОВАЯ АРХИТЕКТУРА UI - VoluptAS

## 📋 ГЛАВНОЕ ОКНО: TABBED INTERFACE

```
┌─ VoluptAS - Functional Coverage Management ──────────────────────────────────┐
│ MenuBar: 📁 Файл | ✏️ Правка | 🔧 Инструменты | ⚙️ Настройки | ❓ Помощь     │
├─ Toolbar ────────────────────────────────────────────────────────────────────┤
│  🔄 Обновить | ➕ Добавить | ✏️ Редактировать | 🗑️ Удалить | 💾 Сохранить    │
├─ ГЛАВНЫЕ ВКЛАДКИ (QTabWidget) ───────────────────────────────────────────────┤
│ ┌──────────────────────────────────────────────────────────────────────────┐ │
│ │ 📊 Таблица | 🌐 Граф | 🧑‍💻 BDD | 📋 Трассировки | 🏗️ INFRA              │ │
│ ├──────────────────────────────────────────────────────────────────────────┤ │
│ │                                                                          │ │
│ │                    [КОНТЕНТ АКТИВНОЙ ВКЛАДКИ]                            │ │
│ │                                                                          │ │
│ │                       (динамически меняется)                             │ │
│ │                                                                          │ │
│ └──────────────────────────────────────────────────────────────────────────┘ │
├─ StatusBar ──────────────────────────────────────────────────────────────────┤
│  ✅ Загружено: 156 записей | Активная вкладка: Таблица | DB: Connected       │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 🗂️ СТРУКТУРА ТАБОВ

### 1️⃣ Таб: 📊 **ТАБЛИЦА + СПУТНИК-ГРАФ**

```
┌─ Фильтры ────────────────────────────────────────────────────────────────────┐
│ 🔍 Поиск: [___________] Type:[▼] Module:[▼] Epic:[▼] Segment:[▼]            │
│ QA:[▼] Dev:[▼] ☑Crit ☑Focus      [❌ Сбросить фильтры]                      │
├──────────────────────────────────────────────────────────────────────────────┤
│ ┌─ ТАБЛИЦА (70%) ───────────────────────────┐ ┌─ МИНИ-ГРАФ (30%) ─────────┐ │
│ │ FuncID    | Alias | Title    | Type | ... │ │   🔗 Связи выбранного:    │ │
│ │ ----------+-------+----------+------+-----│ │                           │ │
│ │ AUTH.Logi*| Login | Login..  | Feat | ✅  │ │     [AUTH.Login]          │ │
│ │ AUTH.Reg  | Reg   | Register | Feat | 🔴  │ │      /    |    \          │ │
│ │ DASH.Sett | Setts | Settings | Feat | ⚪  │ │   POM   Test   Doc        │ │
│ │ ...                                       │ │                           │ │
│ │                                           │ │   🖱️ Клик → выделить     │ │
│ │  * = inline-редактирование:              │ │   🖱️ 2x клик → редактор  │ │
│ │    alias, title, segment, ☑ checkboxes   │ │   🖱️ 3x клик → полн.граф │ │
│ └───────────────────────────────────────────┘ └───────────────────────────┘ │
│                                                                              │
│ 🖱️ Двойной клик по строке → Редактор элемента                               │
└──────────────────────────────────────────────────────────────────────────────┘
```

**Функционал:**
- ✅ Таблица со всеми функциональными элементами
- ✅ Inline-редактирование: alias, title, segment, checkboxes (is_crit, is_focus)
- ✅ Мини-граф связей выбранного элемента (интерактивный)
- ✅ Двойной клик по строке → Редактор элемента
- ✅ Клик по узлу мини-графа → выделение строки
- ✅ Тройной клик по узлу → переход на таб "Граф" с фокусом на элементе

---

### 2️⃣ Таб: 🌐 **БОЛЬШОЙ ГРАФ**

```
┌─ Настройки графа ────────────────────────────────────────────────────────────┐
│ Типы связей: ☑ Иерархия ☑ Функционал ☑ POM ☑ Service ☑ Test ☑ Doc          │
│ Фильтры: Module:[▼] Epic:[▼] Type:[▼]  🔄 Обновить  💾 Экспорт PNG/SVG      │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│                        🌐 Obsidian-style Graph View                          │
│                                                                              │
│                    ●───────●              ●───────●                          │
│                   /│\     /│\            /│\     /│\                         │
│                  ● ● ●   ● ● ●          ● ● ●   ● ● ●                        │
│                                                                              │
│               [Zoom: 100%] [Pan] [Fit to screen]                             │
│                                                                              │
├─ Легенда ────────────────────────────────────────────────────────────────────┤
│ ◼️ Иерархия │ ◼️ Функционал │ ◼️ Service │ ◼️ POM │ ◼️ Test │ ◼️ Doc        │
└──────────────────────────────────────────────────────────────────────────────┘
```

**Функционал:**
- ✅ Полный граф связей с фильтрацией по типам
- ✅ Интерактивная навигация (zoom, pan)
- ✅ Клик по узлу → информационная панель справа
- ✅ Двойной клик → редактор элемента
- ✅ Экспорт графа в PNG/SVG

---

### 3️⃣ Таб: 🧑‍💻 **BDD FEATURES**

```
┌─ Фильтры ────────────────────────────────────────────────────────────────────┐
│ 🔍 Поиск: [___] Type:[▼] Segment:[▼] ☑Crit ☑Focus  🛠️ Генерировать всё     │
├──────────────────────────────────────────────────────────────────────────────┤
│ ┌─ СПИСОК ЭЛЕМЕНТОВ (30%) ─────┐ ┌─ ПРЕДПРОСМОТР GHERKIN (70%) ──────────┐ │
│ │ FuncID       | Title   | BDD  │ │ # Feature: User Authentication        │ │
│ │ -------------+---------+------│ │                                       │ │
│ │ AUTH.Login * | Login   | ✅   │ │ ## Scenario: Valid login              │ │
│ │ AUTH.Reg     | Reg     | 🔴   │ │   Given user at "/login"              │ │
│ │ DASH.Setts   | Setts   | ⚪   │ │   When enter valid credentials        │ │
│ │ ...                           │ │   Then user redirected to dashboard   │ │
│ │                               │ │                                       │ │
│ │  🖱️ Клик → показать справа   │ │ ## Scenario: Invalid login            │ │
│ │                               │ │   Given user at "/login"              │ │
│ │                               │ │   When enter invalid credentials      │ │
│ │                               │ │   Then show error message             │ │
│ │                               │ │                                       │ │
│ │                               │ │ ✏️ [Редактировать] 🛠️ [Генерировать]  │ │
│ └───────────────────────────────┘ └───────────────────────────────────────┘ │
├─ Действия ───────────────────────────────────────────────────────────────────┤
│  💾 Экспорт в .feature файлы | 📤 Batch-генерация по фильтру                │
└──────────────────────────────────────────────────────────────────────────────┘
```

**Функционал:**
- ✅ Список элементов с индикацией наличия BDD-фич
- ✅ Предпросмотр Gherkin-сценариев
- ✅ Inline-редактирование Gherkin
- ✅ Генерация по AI (через OpenAI/Claude)
- ✅ Batch-генерация для выбранных элементов
- ✅ Экспорт в .feature файлы

---

### 4️⃣ Таб: 📋 **МАТРИЦА ТРАССИРОВОК**

```
┌─ Тип трассировки ────────────────────────────────────────────────────────────┐
│ 🎯 Что трассируем:                                                           │
│  ☑ Автотесты  ☑ ТЗ (Requirements)  ☑ Тест-кейсы  ☑ Баги  ☑ Документация    │
│  ☑ Типы проверок: ☐ Smoke ☐ Regression ☐ Dev-only                           │
├─ Фильтры ────────────────────────────────────────────────────────────────────┤
│ Module:[▼] Epic:[▼] Feature:[▼] ☑Crit ☑Focus  ☐ Показать только без покрытия│
├──────────────────────────────────────────────────────────────────────────────┤
│ FuncID       │Автотесты│ ТЗ │Кейсы│Smoke│Regr│Dev │Баги│Доки│Coverage│Status │
│ ─────────────┼─────────┼────┼─────┼─────┼────┼────┼────┼────┼────────┼───────│
│ AUTH.Login   │ ✅ 3 TC │ ✅ │ ✅ 5│ ✅  │ ✅ │ ✅ │ 🔗2│ ✅ │  100%  │ ✅ OK │
│ AUTH.Reg     │ 🔴 None │ ✅ │ ✅ 2│ ✅  │ 🔴 │ ✅ │ 🔗1│ 🔴 │   60%  │ ⚠️    │
│ DASH.Setts   │ ⚠️ 1 TC │ 🔴 │ 🔴  │ 🔴  │ 🔴 │ ✅ │ 🔴 │ ✅ │   30%  │ 🔴 NG │
│ PAY.Checkout │ ✅ 5 TC │ ✅ │ ✅ 8│ ✅  │ ✅ │ ✅ │ 🔗5│ ✅ │  100%  │ ✅ OK │
│ ...                                                                          │
├─ 📈 МЕТРИКИ ПОКРЫТИЯ ────────────────────────────────────────────────────────┤
│ ┌─ Общее ──────────┐ ┌─ Автотесты ─────┐ ┌─ Тест-кейсы ───┐ ┌─ Риски ─────┐│
│ │ Всего: 156       │ │ С авто: 87 (56%)│ │ С кейсами: 120 │ │ NG: 23(15%)││
│ │ Критических: 45  │ │ Без авто: 69    │ │ Без кейсов: 36 │ │ OK: 98(63%)││
│ │ В фокусе: 23     │ │ Progress: 12    │ │ В работе: 15   │ │ ⚠️: 35(22%)││
│ └──────────────────┘ └─────────────────┘ └────────────────┘ └─────────────┘│
├─ Действия ───────────────────────────────────────────────────────────────────┤
│  💾 Экспорт в Excel/CSV | 📊 Отчёт по покрытию (PDF) | 🔄 Обновить статусы │
└──────────────────────────────────────────────────────────────────────────────┘
```

**Функционал:**
- ✅ Настраиваемые колонки трассировки (чекбоксы вверху)
- ✅ Фильтрация по модулям/эпикам/типам
- ✅ Цветовая индикация статусов (🔴 нет, ⚠️ частично, ✅ есть)
- ✅ Процент покрытия + общий статус (OK/NG/⚠️)
- ✅ Метрики внизу (4 блока: общее, автотесты, кейсы, риски)
- ✅ Экспорт в Excel/CSV/PDF
- ✅ Клик по ячейке → детали (например, список тест-кейсов)
- ✅ Двойной клик по строке → редактор элемента (таб "Покрытие")

**Типы проверок:**
- 🔥 **Smoke** — базовые проверки (быстрые, критичные пути)
- 🔄 **Regression** — регрессионное тестирование (полный набор)
- 🛠️ **Dev-only** — проверки только для разработки

**Источники данных:**
- **Автотесты:** Статусы проставляет QA Lead вручную
- **Баги:** ID из Zoho Projects (ручной ввод), синхронизация — позже
- **Тест-кейсы:** Ручной ввод, ссылки на TestRail/Zoho
- **Документация:** Ссылки на Confluence/Notion

---

### 5️⃣ Таб: 🏗️ **INFRA (Зрелость инфраструктуры)**

```
┌─ Категории зрелости ─────────────────────────────────────────────────────────┐
│  🎯 CODE | 🐳 CONTAINER | 🗄️ DB | 🧩 SUBSYSTEMS | 🔗 EXTERNAL | 🔐 SECURITY | 📊 METRICS │
├──────────────────────────────────────────────────────────────────────────────┤
│ ┌─ 🎯 CODE MATURITY ───────────────────────────────────────────────────────┐ │
│ │ Репозиторий     │ Покрытие тестами │ Линтер  │ Typecheck │ CI/CD │ Docs │ │
│ │ ────────────────┼──────────────────┼─────────┼───────────┼───────┼──────│ │
│ │ voluptas-api    │ ██████░░░░ 60%   │ ✅ ESL  │ ✅ TS     │ ✅ GH │ ✅   │ │
│ │ voluptas-web    │ ████░░░░░░ 40%   │ ✅ ESL  │ 🔴 None   │ ✅ GH │ ⚠️   │ │
│ │ voluptas-mobile │ ██░░░░░░░░ 20%   │ 🔴 None │ 🔴 None   │ 🔴 No │ 🔴   │ │
│ └──────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│ ┌─ 🐳 CONTAINER MATURITY ───────────────────────────────────────────────────┐ │
│ │ Контейнер       │ Образ           │ Версия  │ Registry │ Health │ Auto  │ │
│ │ ────────────────┼─────────────────┼─────────┼──────────┼────────┼───────│ │
│ │ api-gateway     │ nginx:alpine    │ 1.25    │ ✅ DocHub│ ✅ OK  │ ✅ K8s│ │
│ │ auth-service    │ node:18-alpine  │ 18.2    │ ✅ DocHub│ ✅ OK  │ ✅ K8s│ │
│ │ payment-svc     │ python:3.11-slim│ 3.11.4  │ ✅ DocHub│ ✅ OK  │ ✅ K8s│ │
│ │ legacy-api      │ 🔴 None (VM)    │ N/A     │ 🔴 No    │ ⚠️     │ 🔴 No │ │
│ └──────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│ ┌─ 🗄️ DB NAME ──────────────────────────────────────────────────────────────┐ │
│ │ База данных     │ Версия  │ Бэкапы  │ Миграции │ Индексы │ Монитор.     │ │
│ │ ────────────────┼─────────┼─────────┼──────────┼─────────┼──────────    │ │
│ │ postgres-main   │ 15.2    │ ✅ Auto │ ✅ Alembic│ ✅ OK   │ ✅ Grafana   │ │
│ │ redis-cache     │ 7.0     │ 🔴 No   │ 🔴 N/A   │ ✅ OK   │ ⚠️ Basic     │ │
│ │ mongo-logs      │ 6.0     │ ⚠️ Man  │ 🔴 None  │ ⚠️      │ 🔴 None      │ │
│ └──────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│ ┌─ 🧩 SUBSYSTEMS INVOLVED ──────────────────────────────────────────────────┐ │
│ │ Подсистема      │ Владелец     │ SLA   │ Зависимости │ Критичность      │ │
│ │ ────────────────┼──────────────┼───────┼─────────────┼──────────────    │ │
│ │ Authentication  │ Team Auth    │ 99.9% │ DB, Redis   │ 🔴 Critical      │ │
│ │ Payment Gateway │ Team Pay     │ 99.99%│ Stripe API  │ 🔴 Critical      │ │
│ │ Notifications   │ Team Core    │ 95%   │ SMTP, FCM   │ 🟡 Medium        │ │
│ │ Analytics       │ Team BI      │ 90%   │ ClickHouse  │ 🟢 Low           │ │
│ └──────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│ ┌─ 🔗 EXTERNAL SERVICES ────────────────────────────────────────────────────┐ │
│ │ Внешний сервис  │ Провайдер    │ SLA   │ Failover │ Costs/mo │ Status  │ │
│ │ ────────────────┼──────────────┼───────┼──────────┼──────────┼─────────│ │
│ │ Stripe API      │ Stripe Inc.  │ 99.99%│ ✅ Yes   │ $2,500   │ 🟢 UP   │ │
│ │ Twilio SMS      │ Twilio       │ 99.95%│ 🔴 No    │ $800     │ 🟢 UP   │ │
│ │ AWS S3          │ Amazon       │ 99.99%│ ✅ Yes   │ $1,200   │ 🟢 UP   │ │
│ │ SendGrid        │ SendGrid     │ 99.9% │ ⚠️ Partial│ $600    │ 🟢 UP   │ │
│ └──────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│ ┌─ 📊 ОБЩИЕ МЕТРИКИ ЗРЕЛОСТИ ──────────────────────────────────────────────┐ │
│ │                                                                          │ │
│ │  🎯 CODE:     ████████░░ 65%  (Medium)                                   │ │
│ │  🗄️ DATABASE: ███████░░░ 70%  (Good)                                     │ │
│ │  🐳 SERVICES: ██████████ 85%  (Excellent)                                │ │
│ │  📦 PACKAGES: █████░░░░░ 50%  (Low)                                      │ │
│ │                                                                          │ │
│ │  🏆 ОБЩАЯ ЗРЕЛОСТЬ: ███████░░░ 67% (Medium)                              │ │
│ │                                                                          │ │
│ └──────────────────────────────────────────────────────────────────────────┘ │
├─ Действия ───────────────────────────────────────────────────────────────────┤
│  ✏️ Редактировать элемент INFRA | 💾 Экспорт отчёта | 🔄 Обновить статусы   │
└──────────────────────────────────────────────────────────────────────────────┘
```

**Функционал:**
- ✅ Категории: Code, Container, DB Name, Subsystems, External Services, Security, Metrics
- ✅ Для каждой категории — таблица с метриками зрелости
- ✅ Progress bars для визуализации покрытия/статуса
- ✅ Цветовая индикация: 🟢 Good, 🟡 Warning, 🔴 Critical
- ✅ Общая метрика зрелости внизу
- ✅ Возможность редактирования (форма для добавления/обновления)
- ✅ **Импорт:** CSV, Google Sheets
- ✅ **Экспорт:** Google Sheets (приоритет!), CSV, Excel
- 🔄 **TODO:** Доработать экспорт в Google Sheets (автосинхронизация)

**Структура данных (новая таблица `infra_maturity`):**
```sql
CREATE TABLE infra_maturity (
    id INTEGER PRIMARY KEY,
    category TEXT,  -- code, database, services, packages, security
    name TEXT,
    version TEXT,
    metrics JSONB,  -- {test_coverage: 60, linter: true, ...}
    status TEXT,    -- ok, warning, critical
    maturity_score INTEGER,  -- 0-100
    updated_at TIMESTAMP
);
```

---

## 🗂️ РЕСТРУКТУРИРОВАННОЕ МЕНЮ

### ❌ СТАРАЯ СТРУКТУРА (удаляем избыточность):
```
📁 Файл
  └─ Выход

✏️ Правка
  └─ ➕ Добавить

🔧 Инструменты
  ├─ 📦 Редактор сущностей  ✅ (переносим в Settings)
  ├─ 👥 Управление пользователями
  ├─ ────────────────────
  ├─ 📚 Справочники
  ├─ ────────────────────
  ├─ 🧑‍💻 BDD Feature Manager  ❌ (теперь в табе)
  └─ 📝 Генерация BDD (batch)  ❌ (теперь в табе)

🕸️ Граф
  └─ 🌐 Открыть граф  ❌ (теперь в табе)

⚙️ Настройки
  └─ ⚙️ Zoho API  ❌ (теперь в Settings окне)
```

---

### ✅ НОВАЯ СТРУКТУРА (упрощённая):

```
┌─ MenuBar ─────────────────────────────────────────────────────────────┐
│ 📁 Файл | ✏️ Правка | 🔧 Инструменты | ⚙️ Настройки | ❓ Помощь       │
└───────────────────────────────────────────────────────────────────────┘

📁 ФАЙЛ
  ├─ 📂 Открыть проект
  ├─ 💾 Сохранить всё                   Ctrl+S
  ├─ ────────────────────────────
  ├─ 📤 Импорт
  │  ├─ 📥 Из CSV
  │  ├─ 📥 Из Excel
  │  └─ 📥 Из Zoho Projects
  ├─ 📥 Экспорт
  │  ├─ 📤 В CSV
  │  ├─ 📤 В Excel
  │  ├─ 📤 В JSON
  │  └─ 📊 Отчёт (PDF)
  ├─ ────────────────────────────
  └─ 🚪 Выход                           Alt+F4

✏️ ПРАВКА
  ├─ ➕ Добавить элемент                Ctrl+N
  ├─ ✏️ Редактировать                   Ctrl+E
  ├─ 🗑️ Удалить                         Delete
  ├─ ────────────────────────────
  ├─ 📋 Копировать                      Ctrl+C
  ├─ 📄 Вставить                        Ctrl+V
  ├─ ────────────────────────────
  └─ 🔍 Найти...                        Ctrl+F

🔧 ИНСТРУМЕНТЫ
  ├─ 👥 Управление пользователями
  ├─ 📚 Справочники
  │  ├─ 📦 Типы (Feature, Epic, Service...)
  │  ├─ 📁 Модули
  │  ├─ 🎯 Эпики
  │  ├─ 🏷️ Сегменты
  │  └─ 🔗 Типы связей
  ├─ ────────────────────────────
  ├─ 🔄 Синхронизация с Zoho
  ├─ 🔄 Обновить все данные
  └─ 🧹 Очистка кэша

⚙️ НАСТРОЙКИ
  ├─ ⚙️ Открыть настройки...            Ctrl+,
  └─ 📦 Редактор сущностей

❓ ПОМОЩЬ
  ├─ 📖 Документация
  ├─ 🎓 Руководство пользователя
  ├─ 🐛 Сообщить об ошибке
  ├─ ────────────────────────────
  └─ ℹ️ О программе
```

---

## ⚙️ ОКНО НАСТРОЕК (SETTINGS WINDOW)

```
┌─ Настройки VoluptAS ──────────────────────────────────────────────────────┐
│ ┌─ Категории (Tabs) ───────────────────────────────────────────────────┐  │
│ │ 🔌 API | 🎨 Интерфейс | 🗄️ БД | 🔔 Уведомления | 🔐 Безопасность | 📦 Сущности │
│ ├──────────────────────────────────────────────────────────────────────┤  │
│ │                                                                      │  │
│ │  [АКТИВНАЯ ВКЛАДКА НАСТРОЕК]                                        │  │
│ │                                                                      │  │
│ └──────────────────────────────────────────────────────────────────────┘  │
│                                                                            │
│  [💾 Сохранить]  [↩️ Отменить]  [🔄 Сброс по умолчанию]                    │
└────────────────────────────────────────────────────────────────────────────┘
```

### Таб: 🔌 API
```
┌─ Zoho Projects API ───────────────────────────────────────────────────────┐
│  Org ID:      [___________________________]                               │
│  Portal:      [___________________________]                               │
│  Project ID:  [___________________________]                               │
│  API Token:   [***************************]  🔑 Показать                  │
│                                                                           │
│  [🧪 Проверить подключение]  Статус: ✅ Подключено                        │
├─ OpenAI API (для BDD генерации) ──────────────────────────────────────────┤
│  API Key:     [***************************]  🔑 Показать                  │
│  Model:       [gpt-4 ▼]                                                   │
│  Max tokens:  [2000]                                                      │
└───────────────────────────────────────────────────────────────────────────┘
```

### Таб: 🎨 Интерфейс
```
┌─ Внешний вид ─────────────────────────────────────────────────────────────┐
│  Тема:            ⚫ Тёмная  ⚪ Светлая  🌓 Системная                     │
│  Масштаб UI:      [100%] ▼                                                │
│  Шрифт:           [Segoe UI ▼]  Размер: [10 ▼]                           │
├─ Таблица ─────────────────────────────────────────────────────────────────┤
│  Строк на страницу: [50 ▼]                                                │
│  ☑ Альтернативная окраска строк                                           │
│  ☑ Показывать сетку                                                       │
├─ Граф ────────────────────────────────────────────────────────────────────┤
│  Стиль узлов:     ● Круги  ◼️ Квадраты  ◆ Ромбы                          │
│  Анимация:        ☑ Включить (может замедлять на больших графах)          │
└───────────────────────────────────────────────────────────────────────────┘
```

### Таб: 🗄️ База данных
```
┌─ Подключение ─────────────────────────────────────────────────────────────┐
│  Тип БД:      SQLite (встроенная)                                         │
│  Путь:        C:\ITS_QA\VoluptAS\data\voluptas.db                         │
│                                                                           │
│  [🔄 Пересоздать БД]  [📤 Экспорт дампа]  [📥 Импорт дампа]               │
├─ Оптимизация ─────────────────────────────────────────────────────────────┤
│  [🧹 VACUUM (сжатие)]  [📊 ANALYZE (статистика)]                          │
│  [🔧 Rebuild indexes]                                                     │
└───────────────────────────────────────────────────────────────────────────┘
```

### Таб: 🔔 Уведомления
```
┌─ Уведомления ─────────────────────────────────────────────────────────────┐
│  ☑ Показывать уведомления при изменениях                                  │
│  ☑ Звуковые уведомления                                                    │
│  ☐ Уведомления на рабочий стол (Windows Toast)                            │
└───────────────────────────────────────────────────────────────────────────┘
```

### Таб: 🔐 Безопасность
```
┌─ Безопасность ────────────────────────────────────────────────────────────┐
│  ☑ Требовать пароль при запуске                                           │
│  ☑ Логировать все действия                                                │
│  ☐ Шифровать БД (требуется перезапуск)                                    │
│                                                                           │
│  [🔑 Изменить пароль]  [📜 Просмотр логов]                                │
└───────────────────────────────────────────────────────────────────────────┘
```

### Таб: 📦 Редактор сущностей
```
┌─ Редактор сущностей (Entity Manager) ─────────────────────────────────────┐
│ Категория: [Типы функциональных элементов ▼]                              │
├───────────────────────────────────────────────────────────────────────────┤
│ ┌─ Список сущностей ──────────────┐ ┌─ Редактирование ─────────────────┐ │
│ │ ID  | Название        | Цвет    │ │ ID:          [5]                 │ │
│ │ ────┼─────────────────┼─────────│ │ Название:    [Epic]              │ │
│ │ 1   | Feature         | 🟦      │ │ Цвет:        [🟦 Выбрать]       │ │
│ │ 2   | Epic            | 🟪      │ │ Описание:    [Крупная история]   │ │
│ │ 3   | Service         | 🟧      │ │ Порядок:     [2]                 │ │
│ │ 4   | POM             | 🟨      │ │ ☑ Активно                        │ │
│ │ 5   | Epic          * | 🟪      │ │                                  │ │
│ │ ...                             │ │ [💾 Сохранить] [➕ Добавить]     │ │
│ └─────────────────────────────────┘ └──────────────────────────────────┘ │
│                                                                           │
│ Доступные категории:                                                      │
│  • Типы функциональных элементов (Feature, Epic, Service, POM, ...)      │
│  • Типы связей (Иерархия, Функционал, Test, Doc, Service, ...)           │
│  • Модули (AUTH, DASHBOARD, PAYMENT, ...)                                 │
│  • Эпики (User Management, Billing, Reports, ...)                         │
│  • Сегменты (UI, API, Backend, DB, ...)                                   │
│  • Типы проверок (Smoke, Regression, Dev-only, ...)  ⭐ НОВОЕ             │
│  • Статусы автоматизации (Not Started, In Progress, Automated, ...)       │
└───────────────────────────────────────────────────────────────────────────┘
```

**Функционал:**
- ✅ Управление всеми справочниками в одном месте
- ✅ Добавление/редактирование/удаление сущностей
- ✅ Настройка цветов, порядка, описаний
- ✅ Новая сущность: **Типы проверок** (Smoke, Regression, Dev-only)
- ✅ Экспорт/импорт справочников в CSV

---

## 🎭 ВСПЛЫВАЮЩИЕ РЕДАКТОРЫ (DIALOGS)

### ✏️ Редактор элемента (DynamicEditDialog)

```
┌─ Редактирование: AUTH.Login ──────────────────────────────────────────────┐
│ ┌─ Вкладки ─────────────────────────────────────────────────────────────┐ │
│ │ 📋 Основные | 👥 Ответственные | 📋 Покрытие | 🧑‍💻 BDD | 🔗 Связи      │ │
│ ├───────────────────────────────────────────────────────────────────────┤ │
│ │                                                                       │ │
│ │                    [КОНТЕНТ АКТИВНОЙ ВКЛАДКИ]                         │ │
│ │                                                                       │ │
│ └───────────────────────────────────────────────────────────────────────┘ │
│  [💾 Сохранить]  [↩️ Отменить]  [🗑️ Удалить]                               │
└────────────────────────────────────────────────────────────────────────────┘
```

**Вкладки редактора:**
1. **📋 Основные** — FuncID, Title, Type, Module, Epic, Segment, Description
2. **👥 Ответственные** — QA, Dev, Product Owner
3. **📋 Покрытие** — Test Cases, Automation Status, Docs, типы проверок
4. **🧑‍💻 BDD** — Gherkin-сценарии (inline-редактор)
5. **🔗 Связи** — список связанных элементов (граф + таблица)

---

## 📊 СРАВНЕНИЕ: ДО И ПОСЛЕ

| Аспект                     | ❌ Текущее состояние                | ✅ Новая архитектура               |
|----------------------------|-------------------------------------|-------------------------------------|
| **Главный экран**          | Только таблица + мини-граф          | 5 табов: Таблица/Граф/BDD/Трасс/INFRA |
| **Граф**                   | Отдельное окно                      | Таб (быстрый доступ)                |
| **BDD Manager**            | Отдельное окно                      | Таб (быстрый доступ)                |
| **Матрица трассировок**    | ❌ Отсутствует                      | ✅ Полноценный таб с метриками      |
| **INFRA**                  | ❌ Отсутствует                      | ✅ Новый таб для зрелости системы   |
| **Меню**                   | Избыточное (дубли)                  | Лаконичное, логичное                |
| **Настройки**              | Одно окно Zoho API                  | Полноценное окно с табами           |
| **Навигация**              | Много переходов между окнами        | Всё в одном окне, табы              |
| **Взаимодействие с графом**| Мини-граф неинтерактивный           | Клик → выделение, 2x клик → редактор|

---

## 🚀 ПЛАН РЕАЛИЗАЦИИ

### Фаза 1: Подготовка структуры (1-2 часа)
1. ✅ Создать `main_tabs_widget.py` с QTabWidget
2. ✅ Создать базовые классы для табов:
   - `TableGraphTabWidget`
   - `FullGraphTabWidget`
   - `BddTabWidget`
   - `CoverageMatrixTabWidget`
   - `InfraMaturityTabWidget`

### Фаза 2: Реализация табов (5-7 часов)
3. ✅ Перенести текущую таблицу + мини-граф в `TableGraphTabWidget`
4. ✅ Перенести граф в `FullGraphTabWidget`
5. ✅ Перенести BDD Manager в `BddTabWidget`
6. ✅ Реализовать `CoverageMatrixTabWidget` (новое!)
7. ✅ Реализовать `InfraMaturityTabWidget` (новое!)

### Фаза 3: Интеграция и навигация (2-3 часа)
8. ✅ Реализовать cross-tab navigation (клик в таблице → граф, и т.д.)
9. ✅ Обновить меню (убрать дубли)
10. ✅ Создать `SettingsWindow` с табами

### Фаза 4: Полировка (1-2 часа)
11. ✅ Hotkeys для переключения табов (Ctrl+1/2/3/4/5)
12. ✅ Tooltips, иконки, статусбар
13. ✅ Тестирование навигации
14. ✅ Справка (Help) с hotkeys и руководством

### Фаза 5: Экспорт и интеграции (будущее)
15. 🔄 **TODO:** Экспорт INFRA в Google Sheets (автосинхронизация)
16. 🔄 **TODO:** Синхронизация багов из Zoho Projects (автоматическая)
17. 🔄 **TODO:** Интеграция с SonarQube/Grafana (если потребуется)

---

## ✅ РЕШЁННЫЕ ВОПРОСЫ

### 1. **INFRA Maturity:**
   - ✅ Категории: Code, Container, DB Name, Subsystems, External Services, Security, Metrics
   - ✅ Данные: **Ручное наполнение** + импорт из CSV/Google Sheets
   - ✅ **Экспорт в Google Sheets** — приоритет! (доработать позже)
   - ⏳ Интеграция с SonarQube/Grafana — пока не требуется

### 2. **Матрица трассировок:**
   - ✅ Типы проверок: Smoke, Regression, Dev-only (добавить в редактор сущностей)
   - ✅ Баги: ID из Zoho Projects, ручной ввод (синхронизация — позже)
   - ✅ Статусы автотестов: **Ставит QA Lead вручную**

### 3. **Настройки:**
   - ✅ 6 табов: API | Интерфейс | БД | Уведомления | Безопасность | **Сущности**
   - ✅ **Редактор сущностей** — в настройках (очень важно!)
   - ✅ Новая сущность: **Типы проверок** (Smoke/Regression/Dev-only)

### 4. **Навигация:**
   - ✅ Hotkeys для табов: Ctrl+1/2/3/4/5 (если реализованы — положить в справку)
   - ❌ История переходов (back/forward) — не требуется

---

## ✅ ИТОГО

**✨ Ключевые улучшения:**
1. 🎯 **Всё в одном окне** — нет лишних переходов между окнами
2. 📊 **Матрица трассировок** — наконец-то визуализация покрытия!
3. 🏗️ **INFRA Maturity** — контроль зрелости кодовой базы и инфраструктуры
4. ⚙️ **Единое окно настроек** — удобная организация по категориям
5. 🔗 **Cross-tab navigation** — быстрые переходы между представлениями

**Готов начать реализацию?** 🚀
